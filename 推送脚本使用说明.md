# 🚀 一键推送脚本使用说明

## 📋 快速开始（3 步完成）

### 第 1 步：获取 GitHub Personal Access Token

1. **访问 GitHub Token 页面**：
   ```
   https://github.com/settings/tokens
   ```

2. **生成新 Token**：
   - 点击 **Generate new token**
   - 选择 **Generate new token (classic)**

3. **配置 Token**：
   - **Note**: 填写描述，如 `van-nav-upload`
   - **Expiration**: 选择过期时间（建议 90 days 或 No expiration）
   - **权限勾选**: 
     - ✅ **repo** （勾选这一项即可，会自动勾选所有子项）

4. **生成并复制**：
   - 点击页面底部的 **Generate token** 按钮
   - ⚠️ **立即复制 Token**（只显示一次，离开页面后无法再查看）
   - 保存到安全的地方

**示例 Token 格式**：
```
ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

---

### 第 2 步：配置脚本

1. **打开脚本文件**：
   ```bash
   open -e push-to-github.sh
   # 或用您喜欢的编辑器打开
   ```

2. **修改配置区域**（脚本开头的 3 行）：

   **修改前**：
   ```bash
   GITHUB_USERNAME="your-username"           # 您的 GitHub 用户名
   REPO_NAME="van-nav-enhanced"              # 仓库名称
   GITHUB_TOKEN="your-personal-access-token" # Personal Access Token
   ```

   **修改后**（示例）：
   ```bash
   GITHUB_USERNAME="lyy2024"                 # 改为您的 GitHub 用户名
   REPO_NAME="van-nav-enhanced"              # 改为您的仓库名
   GITHUB_TOKEN="ghp_xxxx...xxxx"            # 粘贴您的 Token
   ```

3. **保存文件**（快捷键 `Cmd+S`）

---

### 第 3 步：执行推送

1. **打开终端**（Terminal）

2. **进入项目目录**：
   ```bash
   cd /Users/lyy/Documents/Cursor/van-nav-master
   ```

3. **添加执行权限**：
   ```bash
   chmod +x push-to-github.sh
   ```

4. **运行脚本**：
   ```bash
   ./push-to-github.sh
   ```

5. **等待完成**（约 30 秒 - 2 分钟）

---

## ✅ 推送成功示例

推送成功后，终端会显示：

```
================================================
🚀 Van Nav - 一键推送到 GitHub
================================================

[HH:MM:SS] ✅ 配置检查通过
[HH:MM:SS] ✅ Git 已安装: git version 2.x.x
[HH:MM:SS] ✅ Git 仓库初始化完成
[HH:MM:SS] ✅ 远程仓库配置完成
[HH:MM:SS] ✅ 已添加 XX 个文件到暂存区
[HH:MM:SS] ✅ 提交完成
[HH:MM:SS] ℹ️  目标: https://github.com/您的用户名/仓库名
[HH:MM:SS] ✅ 推送成功！

================================================
[HH:MM:SS] 推送完成统计
================================================

📊 仓库信息：
   GitHub 地址: https://github.com/您的用户名/仓库名
   文件总数: XXX
   提交总数: X

🔗 相关链接：
   仓库首页: https://github.com/您的用户名/仓库名
   Settings: https://github.com/您的用户名/仓库名/settings
   Pages 配置: https://github.com/您的用户名/仓库名/settings/pages

ℹ️  接下来建议：
   1. 访问仓库 Settings → Pages
   2. 配置 Source: main 分支 + /api-website 目录
   3. 等待 1-3 分钟后访问 API 文档
   4. 更新 README.md 中的 GitHub Pages 链接

================================================
✅ 🎉 全部完成！
```

---

## 🔄 后续更新推送

当您修改了代码，需要再次推送时：

### 方法 1：使用脚本（推荐）

直接运行脚本即可：
```bash
./push-to-github.sh
```

脚本会自动：
- ✅ 检测到新的更改
- ✅ 自动添加和提交
- ✅ 推送到 GitHub

### 方法 2：使用 Git 命令

```bash
# 添加更改
git add .

# 提交（修改提交信息）
git commit -m "描述您的更改"

# 推送
git push
```

---

## ⚙️ 脚本功能说明

### 自动化功能

脚本会自动完成以下操作：

1. ✅ **环境检查**
   - 检查配置是否填写
   - 检查 Git 是否安装

2. ✅ **Git 初始化**
   - 自动初始化 Git 仓库（如果需要）
   - 设置主分支为 `main`

3. ✅ **远程仓库配置**
   - 自动配置 remote origin
   - 自动处理 Token 认证

4. ✅ **文件提交**
   - 自动添加所有文件
   - 自动提交更改

5. ✅ **智能推送**
   - 首次推送使用 `git push -u origin main`
   - 后续推送使用 `git push origin main`
   - 冲突时询问是否强制推送

6. ✅ **统计信息**
   - 显示文件总数
   - 显示提交总数
   - 提供相关链接

---

## 📝 脚本配置说明

### 可配置项

打开 `push-to-github.sh`，在脚本开头可以修改：

```bash
# ==================== 配置区域 ====================

# 必须配置项
GITHUB_USERNAME="your-username"           # 您的 GitHub 用户名
REPO_NAME="van-nav-enhanced"              # 仓库名称
GITHUB_TOKEN="your-personal-access-token" # Personal Access Token

# 可选配置项
COMMIT_MESSAGE="Enhanced van-nav with subcategory system"  # 提交信息

# ================================================
```

### 配置说明

| 配置项 | 说明 | 示例 |
|--------|------|------|
| `GITHUB_USERNAME` | 您的 GitHub 用户名（必填） | `lyy2024` |
| `REPO_NAME` | 仓库名称（必填） | `van-nav-enhanced` |
| `GITHUB_TOKEN` | Personal Access Token（必填） | `ghp_xxx...xxx` |
| `COMMIT_MESSAGE` | Git 提交信息（可选） | `Update features` |

---

## ❓ 常见问题

### Q1: 脚本执行失败，提示 "Permission denied"

**原因**：脚本没有执行权限

**解决**：
```bash
chmod +x push-to-github.sh
```

### Q2: 推送失败，提示 Token 认证错误

**原因**：
- Token 配置错误
- Token 已过期
- Token 权限不足

**解决**：
1. 检查 Token 是否正确复制（不要有多余的空格）
2. 重新生成 Token：https://github.com/settings/tokens
3. 确保勾选了 `repo` 权限
4. 更新脚本中的 Token

### Q3: 推送失败，提示 "Updates were rejected"

**原因**：远程仓库有本地没有的内容

**解决**：脚本会询问是否强制推送
- 输入 `y` 强制推送（会覆盖远程内容）
- 输入 `n` 取消操作

### Q4: 想修改提交信息

**方法 1**：修改脚本中的 `COMMIT_MESSAGE`

**方法 2**：直接使用 Git 命令
```bash
git add .
git commit -m "您的提交信息"
git push
```

### Q5: Token 暴露了怎么办？

**立即处理**：
1. 访问 https://github.com/settings/tokens
2. 找到泄露的 Token，点击 **Delete**
3. 生成新的 Token
4. 更新脚本配置

### Q6: 脚本可以用于其他项目吗？

**可以！** 只需：
1. 复制脚本到其他项目目录
2. 修改 `REPO_NAME` 配置
3. 其他配置保持不变（用户名和 Token 相同）

---

## 🔒 安全建议

### Token 安全

1. **不要分享脚本文件**
   - 脚本包含 Token，不要上传到 GitHub
   - 不要分享给他人

2. **添加到 .gitignore**
   ```bash
   echo "push-to-github.sh" >> .gitignore
   ```

3. **定期更新 Token**
   - 建议每 90 天更新一次
   - 不再使用时立即删除

4. **最小权限原则**
   - 仅勾选必需的 `repo` 权限
   - 不要勾选其他不需要的权限

---

## 📚 相关文档

项目中还有其他参考文档：

- **UPLOAD_TO_GITHUB.md** - 详细的 Git 命令说明
- **GITHUB_PAGES_SETUP.md** - GitHub Pages 配置指南
- **README.md** - 项目完整说明

---

## 💡 进阶使用

### 自定义提交信息

每次推送使用不同的提交信息：

**方法 1**：修改脚本
```bash
# 编辑脚本，修改这一行
COMMIT_MESSAGE="您的新提交信息"
```

**方法 2**：传递参数（需修改脚本支持）
```bash
./push-to-github.sh "您的提交信息"
```

### 推送到不同分支

修改脚本中的分支名称：
```bash
# 查找并替换脚本中的 "main" 为其他分支名
# 例如：dev, feature/xxx
```

---

## 🎉 完成！

现在您已经学会使用一键推送脚本了！

**下次更新代码后，只需运行**：
```bash
./push-to-github.sh
```

简单、快速、自动化！✨

